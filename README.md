# WiseUp Management System

êµìœ¡ ê´€ë¦¬ ì‹œìŠ¤í…œì˜ í’€ìŠ¤íƒ ì• í”Œë¦¬ì¼€ì´ì…˜ì…ë‹ˆë‹¤. React 19 + TypeScript + Vite í”„ë¡ íŠ¸ì—”ë“œì™€ Firebase Functions + Firestore ë°±ì—”ë“œë¡œ êµ¬ì¶•ë˜ì—ˆìŠµë‹ˆë‹¤.

## ğŸ“‹ ëª©ì°¨

- [í”„ë¡œì íŠ¸ ê°œìš”](#-í”„ë¡œì íŠ¸-ê°œìš”)
- [ì£¼ìš” ê¸°ëŠ¥](#-ì£¼ìš”-ê¸°ëŠ¥)
- [ê¸°ìˆ  ìŠ¤íƒ](#ï¸-ê¸°ìˆ -ìŠ¤íƒ)
- [í”„ë¡œì íŠ¸ êµ¬ì¡°](#-í”„ë¡œì íŠ¸-êµ¬ì¡°)
- [ê°œë°œ í™˜ê²½ ì„¤ì •](#-ê°œë°œ-í™˜ê²½-ì„¤ì •)
- [ì•„í‚¤í…ì²˜](#-ì•„í‚¤í…ì²˜)
- [ê°œë°œ ê°€ì´ë“œ](#-ê°œë°œ-ê°€ì´ë“œ)
- [ë°°í¬](#-ë°°í¬)
- [ë¬¸ì„œ](#-ë¬¸ì„œ)

---

## ğŸ¯ í”„ë¡œì íŠ¸ ê°œìš”

WiseUp Management Systemì€ ì˜¨ë¼ì¸ í•™ì›ì„ ìœ„í•œ ì¢…í•© ê´€ë¦¬ ì‹œìŠ¤í…œì…ë‹ˆë‹¤. í•™ìƒ, êµì‚¬, ìˆ˜ì—…, ì¶œì„, ì‹œê°„í‘œ, ì„±ì  ë“±ì„ íš¨ìœ¨ì ìœ¼ë¡œ ê´€ë¦¬í•  ìˆ˜ ìˆëŠ” SPA(Single Page Application)ì…ë‹ˆë‹¤.

### í•µì‹¬ íŠ¹ì§•

- âœ… **ì‹¤ì‹œê°„ ë°ì´í„° ë™ê¸°í™”**: Firestoreë¥¼ í™œìš©í•œ ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸
- âœ… **ë²„ì „ ê¸°ë°˜ ì‹œê°„í‘œ ê´€ë¦¬**: í•™ê¸°ë³„/ê¸°ê°„ë³„ ì‹œê°„í‘œ ë²„ì „ ê´€ë¦¬
- âœ… **ë“œë˜ê·¸ ì•¤ ë“œë¡­ UI**: React DnDë¥¼ í™œìš©í•œ ì§ê´€ì ì¸ ì‹œê°„í‘œ í¸ì§‘
- âœ… **ëŒ€ëŸ‰ ë‹¤ìš´ë¡œë“œ ìµœì í™”**: 50ëª… ì´ìƒ ì‹œê°„í‘œë¥¼ 71ì´ˆ ë‚´ ë‹¤ìš´ë¡œë“œ
- âœ… **ë°˜ì‘í˜• ë””ìì¸**: ëª¨ë°”ì¼/íƒœë¸”ë¦¿/ë°ìŠ¤í¬í†± ì§€ì›
- âœ… **JWT ì¸ì¦**: ë³´ì•ˆ ê°•í™”ëœ ì‚¬ìš©ì ì¸ì¦ ì‹œìŠ¤í…œ

---

## ğŸš€ ì£¼ìš” ê¸°ëŠ¥

### 1. í•™ìƒ ê´€ë¦¬
- í•™ìƒ ë“±ë¡/ìˆ˜ì •/ì‚­ì œ
- í•™ìƒ ê²€ìƒ‰ ë° í•„í„°ë§
- í•™ìƒë³„ ì‹œê°„í‘œ ê´€ë¦¬
- í•™ìƒ-ë¶€ëª¨ ê´€ê³„ ê´€ë¦¬

### 2. ì¶œì„ ê´€ë¦¬
- ì‹¤ì‹œê°„ ì¶œì„ ì²´í¬
- ì¢Œì„ ë°°ì¹˜ ë° ì‹œê°í™”
- ì¶œì„ í†µê³„ ë° ë¶„ì„
- ì¶œì„ ì´ë ¥ ì¡°íšŒ

### 3. ì‹œê°„í‘œ ê´€ë¦¬
- **ë²„ì „ ê¸°ë°˜ ì‹œê°„í‘œ**: í•™ê¸°ë³„/ê¸°ê°„ë³„ ì‹œê°„í‘œ ë²„ì „ ê´€ë¦¬
- **ë“œë˜ê·¸ ì•¤ ë“œë¡­**: ì§ê´€ì ì¸ ì‹œê°„í‘œ í¸ì§‘
- **ìë™ ê²¹ì¹¨ ê°ì§€**: ì‹œê°„ ì¶©ëŒ ìë™ íƒì§€
- **ëŒ€ëŸ‰ ë‹¤ìš´ë¡œë“œ**: ì „ì²´ í•™ìƒ ì‹œê°„í‘œ ZIP ë‹¤ìš´ë¡œë“œ (ìµœì í™”ë¨)
- **ì´ë¯¸ì§€/PDF ìƒì„±**: html2canvas ê¸°ë°˜ ê³ í™”ì§ˆ ì´ë¯¸ì§€ ìƒì„±

### 4. ìˆ˜ì—… ê´€ë¦¬
- ìˆ˜ì—…(ClassSection) ìƒì„±/ìˆ˜ì •/ì‚­ì œ
- ìˆ˜ì—…ë³„ ìƒ‰ìƒ ê´€ë¦¬
- êµì‚¬-ìˆ˜ì—… ë°°ì •
- í•™ìƒ-ìˆ˜ì—… ë“±ë¡

### 5. ì„±ì  ê´€ë¦¬
- ì‹œí—˜ ì„±ì  ì…ë ¥
- ì„±ì  í†µê³„ ë° ë¶„ì„
- ì„±ì í‘œ ìƒì„±

### 6. êµì‚¬ ê´€ë¦¬
- êµì‚¬ ë“±ë¡/ìˆ˜ì •/ì‚­ì œ
- êµì‚¬ë³„ ë‹´ë‹¹ ìˆ˜ì—… ê´€ë¦¬
- êµì‚¬ ìŠ¤ì¼€ì¤„ ì¡°íšŒ

---

## ğŸ› ï¸ ê¸°ìˆ  ìŠ¤íƒ

### í”„ë¡ íŠ¸ì—”ë“œ
| ì¹´í…Œê³ ë¦¬ | ê¸°ìˆ  | ë²„ì „ |
|---------|------|------|
| **í”„ë ˆì„ì›Œí¬** | React | 19.1.0 |
| **ì–¸ì–´** | TypeScript | 5.9.2 |
| **ë¹Œë“œ ë„êµ¬** | Vite | 7.0.4 |
| **ìƒíƒœ ê´€ë¦¬** | Redux Toolkit | 2.8.2 |
| **UI ë¼ì´ë¸ŒëŸ¬ë¦¬** | Ant Design | 5.26.7 |
| **ë¼ìš°íŒ…** | React Router DOM | 7.7.1 |
| **ë“œë˜ê·¸ì•¤ë“œë¡­** | React DnD | 16.0.1 |
| **HTTP í´ë¼ì´ì–¸íŠ¸** | Axios | 1.11.0 |
| **ì´ë¯¸ì§€ ìº¡ì³** | html2canvas | 1.4.1 |
| **ZIP ìƒì„±** | JSZip | 3.10.1 |
| **ë‚ ì§œ ì²˜ë¦¬** | Day.js | 1.11.13 |
| **ìŠ¤íƒ€ì¼ë§** | CSS3 + CSS Variables | - |
| **ë¦°íŒ…** | ESLint + TypeScript ESLint | 9.30.1 |

### ë°±ì—”ë“œ
| ì¹´í…Œê³ ë¦¬ | ê¸°ìˆ  | ë²„ì „ |
|---------|------|------|
| **ëŸ°íƒ€ì„** | Node.js | 20 |
| **í”„ë ˆì„ì›Œí¬** | Express.js | 4.18.2 |
| **í”Œë«í¼** | Firebase Functions | 6.4.0 |
| **ë°ì´í„°ë² ì´ìŠ¤** | Firestore | - |
| **ì–¸ì–´** | TypeScript | 4.9.0 |
| **ì¸ì¦** | JWT + bcrypt | - |
| **ê´€ë¦¬ SDK** | firebase-admin | 11.8.0 |

### ì¸í”„ë¼
- **í˜¸ìŠ¤íŒ…**: Firebase Hosting
- **Functions**: Firebase Functions (asia-northeast3)
- **ë°ì´í„°ë² ì´ìŠ¤**: Firestore
- **ì¸ì¦**: Firebase Auth
- **ìŠ¤í† ë¦¬ì§€**: Firebase Storage

---

## ğŸ—ï¸ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
wiseUp_management_system_online_academy/
â”œâ”€â”€ frontend/                     # React í”„ë¡ íŠ¸ì—”ë“œ
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ features/            # ê¸°ëŠ¥ë³„ ëª¨ë“ˆ (Feature-based Architecture)
â”‚   â”‚   â”‚   â”œâ”€â”€ attendance/      # ì¶œì„ ê´€ë¦¬
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ slice/       # Redux slice
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ types/
â”‚   â”‚   â”‚   â”œâ”€â”€ auth/            # ì¸ì¦
â”‚   â”‚   â”‚   â”œâ”€â”€ class/           # ìˆ˜ì—… ê´€ë¦¬
â”‚   â”‚   â”‚   â”œâ”€â”€ grades/          # ì„±ì  ê´€ë¦¬
â”‚   â”‚   â”‚   â”œâ”€â”€ schedule/        # ì‹œê°„í‘œ ê´€ë¦¬
â”‚   â”‚   â”‚   â”œâ”€â”€ students/        # í•™ìƒ ê´€ë¦¬
â”‚   â”‚   â”‚   â”œâ”€â”€ home/            # í™ˆ
â”‚   â”‚   â”‚   â”œâ”€â”€ learning/        # í•™ìŠµ ê´€ë¦¬
â”‚   â”‚   â”‚   â””â”€â”€ admin/           # ê´€ë¦¬ì
â”‚   â”‚   â”œâ”€â”€ components/          # ê³µí†µ ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”‚   â”œâ”€â”€ business/        # ë¹„ì¦ˆë‹ˆìŠ¤ ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ timetable/   # ì‹œê°„í‘œ ìœ„ì ¯
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ components/  # TimetableDownloadModal, BulkDownloadModal
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ hooks/       # useTimetable
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ types/       # íƒ€ì… ì •ì˜
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ utils/       # ì´ë¯¸ì§€ ìƒì„± ìœ í‹¸
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ TimetableWidget.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ attendance/  # ì¶œì„ ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ studentInfo/ # í•™ìƒ ì •ë³´ íŒ¨ë„
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ClassDetailModal/
â”‚   â”‚   â”‚   â””â”€â”€ common/          # ê³µí†µ UI ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”œâ”€â”€ contexts/            # React Context
â”‚   â”‚   â”‚   â”œâ”€â”€ AppContext.tsx
â”‚   â”‚   â”‚   â””â”€â”€ TimetableVersionContext.tsx
â”‚   â”‚   â”œâ”€â”€ hooks/               # ê³µí†µ í›…
â”‚   â”‚   â”œâ”€â”€ services/            # API ì„œë¹„ìŠ¤
â”‚   â”‚   â”‚   â””â”€â”€ api.ts           # axios ê¸°ë°˜ API í´ë¼ì´ì–¸íŠ¸
â”‚   â”‚   â”œâ”€â”€ store/               # Redux store ì„¤ì •
â”‚   â”‚   â”œâ”€â”€ routes/              # ë¼ìš°íŒ… ì„¤ì •
â”‚   â”‚   â”œâ”€â”€ config/              # ì„¤ì • íŒŒì¼
â”‚   â”‚   â”œâ”€â”€ constants/           # ìƒìˆ˜ ì •ì˜
â”‚   â”‚   â”œâ”€â”€ types/               # ê³µí†µ íƒ€ì…
â”‚   â”‚   â”œâ”€â”€ Layout/              # ë ˆì´ì•„ì›ƒ ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”œâ”€â”€ App.tsx
â”‚   â”‚   â””â”€â”€ main.tsx
â”‚   â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ .env                     # í”„ë¡œë•ì…˜ í™˜ê²½ë³€ìˆ˜
â”‚   â”œâ”€â”€ .env.test                # í…ŒìŠ¤íŠ¸ í™˜ê²½ë³€ìˆ˜
â”‚   â”œâ”€â”€ .env.local               # ë¡œì»¬ í™˜ê²½ë³€ìˆ˜
â”‚   â”œâ”€â”€ package.json
â”‚   â”œâ”€â”€ tsconfig.json
â”‚   â””â”€â”€ vite.config.ts
â”œâ”€â”€ functions/                   # Firebase Functions ë°±ì—”ë“œ
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ controllers/         # HTTP ìš”ì²­/ì‘ë‹µ ì²˜ë¦¬
â”‚   â”‚   â”œâ”€â”€ services/            # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚   â”‚   â”œâ”€â”€ routes/              # API ë¼ìš°íŠ¸ ì •ì˜
â”‚   â”‚   â”œâ”€â”€ types/               # íƒ€ì… ì •ì˜
â”‚   â”‚   â”œâ”€â”€ config/              # ì„¤ì •
â”‚   â”‚   â”‚   â””â”€â”€ firebase.ts
â”‚   â”‚   â””â”€â”€ index.ts             # Express ì„œë²„ ì§„ì…ì 
â”‚   â”œâ”€â”€ lib/                     # ì»´íŒŒì¼ëœ JavaScript
â”‚   â”œâ”€â”€ scripts/
â”‚   â”‚   â””â”€â”€ post-build.js        # ë¹Œë“œ í›„ì²˜ë¦¬ ìŠ¤í¬ë¦½íŠ¸
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ tsconfig.json
â”œâ”€â”€ shared/                      # ê³µìœ  ëª¨ë“ˆ
â”‚   â”œâ”€â”€ types/                   # ê³µìœ  íƒ€ì… ì •ì˜
â”‚   â”œâ”€â”€ constants/               # ê³µìœ  ìƒìˆ˜
â”‚   â”œâ”€â”€ utils/                   # ê³µìœ  ìœ í‹¸ë¦¬í‹°
â”‚   â”œâ”€â”€ index.ts
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ tsconfig.json
â”œâ”€â”€ firebase.json                # Firebase ì„¤ì •
â”œâ”€â”€ .firebaserc                  # Firebase í”„ë¡œì íŠ¸ ì„¤ì •
â”œâ”€â”€ dev.sh                       # ê°œë°œ í™˜ê²½ ì‹œì‘ ìŠ¤í¬ë¦½íŠ¸
â”œâ”€â”€ deploy.sh                    # ë°°í¬ ìŠ¤í¬ë¦½íŠ¸
â”œâ”€â”€ package.json                 # ë£¨íŠ¸ ì˜ì¡´ì„±
â”œâ”€â”€ tsconfig.json                # ë£¨íŠ¸ TypeScript ì„¤ì • (path mappings)
â”œâ”€â”€ CLAUDE.md                    # Claude Code ê°€ì´ë“œ
â””â”€â”€ README.md                    # ë³¸ ë¬¸ì„œ
```

### ì£¼ìš” ë””ë ‰í† ë¦¬ ì„¤ëª…

#### Frontend
- **`features/`**: ê¸°ëŠ¥ë³„ë¡œ êµ¬ì¡°í™”ëœ ëª¨ë“ˆ (Redux slice, hooks, components, pages, types)
- **`components/business/`**: ë„ë©”ì¸ íŠ¹í™” ì»´í¬ë„ŒíŠ¸ (timetable, attendance, studentInfo ë“±)
- **`services/api.ts`**: Axios ê¸°ë°˜ API í´ë¼ì´ì–¸íŠ¸ (ëª¨ë“  ë°±ì—”ë“œ API í˜¸ì¶œ)
- **`store/`**: Redux store ì„¤ì • ë° rootReducer

#### Backend
- **`controllers/`**: HTTP ìš”ì²­ì„ ë°›ì•„ Serviceë¥¼ í˜¸ì¶œí•˜ê³  ì‘ë‹µ ë°˜í™˜
- **`services/`**: ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ê³¼ Firestore ë°ì´í„° ì ‘ê·¼
- **`routes/`**: Express ë¼ìš°í„° ì •ì˜

#### Shared
- **`@wiseup/shared`**: í”„ë¡ íŠ¸ì—”ë“œì™€ ë°±ì—”ë“œê°€ ê³µìœ í•˜ëŠ” íƒ€ì…, ìƒìˆ˜, ìœ í‹¸ë¦¬í‹°
- ë¹Œë“œ ìˆœì„œ: shared â†’ functions â†’ frontend

---

## ğŸš€ ê°œë°œ í™˜ê²½ ì„¤ì •

### í•„ìˆ˜ ìš”êµ¬ì‚¬í•­
- **Node.js**: 20.x ì´ìƒ
- **npm**: 9.0.0 ì´ìƒ
- **Firebase CLI**: ìµœì‹  ë²„ì „
```bash
npm install -g firebase-tools
```

### 1. í”„ë¡œì íŠ¸ í´ë¡  ë° ì˜ì¡´ì„± ì„¤ì¹˜

```bash
# ì €ì¥ì†Œ í´ë¡ 
git clone <repository-url>
cd wiseUp_management_system_online_academy

# ë£¨íŠ¸ ì˜ì¡´ì„± ì„¤ì¹˜
npm install

# í”„ë¡ íŠ¸ì—”ë“œ ì˜ì¡´ì„± ì„¤ì¹˜
cd frontend && npm install && cd ..

# ë°±ì—”ë“œ ì˜ì¡´ì„± ì„¤ì¹˜
cd functions && npm install && cd ..

# Shared ëª¨ë“ˆ ì˜ì¡´ì„± ì„¤ì¹˜
cd shared && npm install && cd ..
```

### 2. í™˜ê²½ ë³€ìˆ˜ ì„¤ì •

#### í”„ë¡ íŠ¸ì—”ë“œ í™˜ê²½ ë³€ìˆ˜

**`.env`** (í”„ë¡œë•ì…˜):
```env
VITE_API_BASE_URL=https://[REGION]-[PROJECT_ID].cloudfunctions.net/api
VITE_FIREBASE_PROJECT_ID=[PROJECT_ID]
VITE_ENVIRONMENT=production
```

**`.env.test`** (í…ŒìŠ¤íŠ¸):
```env
VITE_API_BASE_URL=https://[REGION]-[TEST_PROJECT_ID].cloudfunctions.net/api
VITE_FIREBASE_PROJECT_ID=[TEST_PROJECT_ID]
VITE_ENVIRONMENT=test
```

**`.env.local`** (ë¡œì»¬ ê°œë°œ):
```env
VITE_API_BASE_URL=http://localhost:5001/[PROJECT_ID]/us-central1/wiseupApi/api
VITE_FIREBASE_PROJECT_ID=[PROJECT_ID]
VITE_ENVIRONMENT=local
```

**ì°¸ê³ :**
- ì‹¤ì œ í™˜ê²½ ë³€ìˆ˜ íŒŒì¼ì€ ë³´ì•ˆìƒ `.gitignore`ì— í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤
- í”„ë¡œì íŠ¸ ê´€ë¦¬ìì—ê²Œ ì‹¤ì œ í™˜ê²½ ë³€ìˆ˜ ê°’ì„ ìš”ì²­í•˜ì„¸ìš”
- Firebase í”„ë¡œì íŠ¸ IDì™€ ë¦¬ì „ì€ Firebase Consoleì—ì„œ í™•ì¸ ê°€ëŠ¥í•©ë‹ˆë‹¤

#### ë°±ì—”ë“œ í™˜ê²½ ë³€ìˆ˜

FunctionsëŠ” í™˜ê²½ ë³€ìˆ˜ë¡œ `JWT_SECRET` í•„ìš” (dev.shì—ì„œ ìë™ ì„¤ì •ë¨)
- í”„ë¡œë•ì…˜/í…ŒìŠ¤íŠ¸ í™˜ê²½ì—ì„œëŠ” Firebase Functions í™˜ê²½ ë³€ìˆ˜ë¡œ ì„¤ì • í•„ìš”

### 3. ê°œë°œ ì„œë²„ ì‹¤í–‰

#### ë°©ë²• 1: ìë™ ìŠ¤í¬ë¦½íŠ¸ (ê¶Œì¥)

```bash
./dev.sh
```

**`dev.sh` ìŠ¤í¬ë¦½íŠ¸ê°€ ìë™ìœ¼ë¡œ ìˆ˜í–‰í•˜ëŠ” ì‘ì—…:**
1. ê¸°ì¡´ í”„ë¡œì„¸ìŠ¤ ì¢…ë£Œ (í¬íŠ¸: 5001, 4001, 4002, 4400-4502, 8080, 9099, 5173, 3000, 4173)
2. Shared ëª¨ë“ˆ ë¹Œë“œ
3. Frontend ë¹Œë“œ
4. Backend ë¹Œë“œ
5. Firebase Emulators ì‹œì‘ (ë°±ê·¸ë¼ìš´ë“œ)
   - Functions: localhost:5001
   - Firestore: localhost:8080
   - Emulator UI: localhost:4001
6. í—¬ìŠ¤ ì²´í¬ (Functions, Firestore, Emulator UI)
7. ìƒ˜í”Œ ë°ì´í„° ì´ˆê¸°í™” (`POST /api/initialization/all`)
8. Frontend ê°œë°œ ì„œë²„ ì‹œì‘ (localhost:5173)

ë¡œê·¸ëŠ” `firebase-emulator.log`ì— ì €ì¥ë©ë‹ˆë‹¤.

#### ë°©ë²• 2: ìˆ˜ë™ ì‹¤í–‰

```bash
# í„°ë¯¸ë„ 1: Shared ë¹Œë“œ (ë³€ê²½ ì‹œë§ˆë‹¤)
cd shared && npx tsc

# í„°ë¯¸ë„ 2: Backend
cd functions && npm run serve

# í„°ë¯¸ë„ 3: Frontend
cd frontend && npm run dev
```

### 4. ì ‘ì† ì£¼ì†Œ

- **Frontend**: http://localhost:5173
- **Backend API**: http://localhost:5001/wiseupmanagementsystem/us-central1/wiseupApi/api
- **Firestore Emulator**: http://localhost:8080
- **Emulator UI**: http://localhost:4001

---

## ğŸ¨ ì•„í‚¤í…ì²˜

### Frontend Architecture

#### Feature-based Structure
ê° featureëŠ” ë…ë¦½ì ì¸ ëª¨ë“ˆë¡œ êµ¬ì„±:
```
features/schedule/
â”œâ”€â”€ components/       # UI ì»´í¬ë„ŒíŠ¸
â”œâ”€â”€ hooks/           # ì»¤ìŠ¤í…€ í›…
â”œâ”€â”€ pages/           # í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸
â”œâ”€â”€ slice/           # Redux slice (state, actions, reducers)
â”œâ”€â”€ types/           # TypeScript íƒ€ì…
â””â”€â”€ utils/           # ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
```

#### State Management
- **Redux Toolkit**: ì „ì—­ ìƒíƒœ ê´€ë¦¬
  - `attendanceSlice`: ì¶œì„ ê´€ë¦¬
  - `classSlice`: ìˆ˜ì—… ê´€ë¦¬
  - `gradesSlice`: ì„±ì  ê´€ë¦¬
  - `studentSlice`: í•™ìƒ ê´€ë¦¬
  - `authSlice`: ì¸ì¦ ìƒíƒœ
- **Context API**: UI ìƒíƒœ ê´€ë¦¬
  - `AppContext`: ì‚¬ì´ë“œë°”, í˜„ì¬ í˜ì´ì§€ ë“±
  - `TimetableVersionContext`: í™œì„± ì‹œê°„í‘œ ë²„ì „

#### Component Hierarchy
```
App
â”œâ”€â”€ Layout
â”‚   â”œâ”€â”€ Sidebar
â”‚   â””â”€â”€ MainContent
â”‚       â”œâ”€â”€ HomePage
â”‚       â”œâ”€â”€ AttendancePage
â”‚       â”‚   â”œâ”€â”€ AttendanceHeader
â”‚       â”‚   â”œâ”€â”€ AttendanceSearchSection
â”‚       â”‚   â””â”€â”€ AttendanceSeatingSection
â”‚       â”œâ”€â”€ SchedulePage
â”‚       â”‚   â”œâ”€â”€ TimetableWidget
â”‚       â”‚   â”œâ”€â”€ TimetableEditModal
â”‚       â”‚   â”œâ”€â”€ TimetableDownloadModal
â”‚       â”‚   â””â”€â”€ BulkTimetableDownloadModal
â”‚       â”œâ”€â”€ StudentsPage
â”‚       â”œâ”€â”€ GradesPage
â”‚       â””â”€â”€ ClassPage
â””â”€â”€ Routes
```

### Backend Architecture

#### Service Layer Pattern
```
Controller â†’ Service â†’ Firestore
```

**ì˜ˆì‹œ: í•™ìƒ ë“±ë¡**
```typescript
// 1. Controller: HTTP ìš”ì²­ ë°›ê¸°
StudentController.createStudent(req, res)

// 2. Service: ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì²˜ë¦¬
StudentService.createStudent(studentData)

// 3. Firestore: ë°ì´í„° ì €ì¥
await db.collection('students').add(studentData)
```

#### API Structure
```
/api
â”œâ”€â”€ /students              # í•™ìƒ ê´€ë¦¬
â”œâ”€â”€ /teachers              # êµì‚¬ ê´€ë¦¬
â”œâ”€â”€ /class-sections        # ìˆ˜ì—… ê´€ë¦¬
â”œâ”€â”€ /attendance            # ì¶œì„ ê´€ë¦¬
â”œâ”€â”€ /student-timetables    # í•™ìƒ ì‹œê°„í‘œ
â”œâ”€â”€ /timetable-versions    # ì‹œê°„í‘œ ë²„ì „
â”œâ”€â”€ /courses               # ê³¼ëª© ê´€ë¦¬
â”œâ”€â”€ /classrooms            # êµì‹¤ ê´€ë¦¬
â”œâ”€â”€ /seats                 # ì¢Œì„ ê´€ë¦¬
â”œâ”€â”€ /seat-assignments      # ì¢Œì„ ë°°ì •
â”œâ”€â”€ /student-summaries     # í•™ìƒ ìš”ì•½ ì •ë³´
â”œâ”€â”€ /parents               # ë¶€ëª¨ ê´€ë¦¬
â”œâ”€â”€ /colors                # ìƒ‰ìƒ íŒ”ë ˆíŠ¸
â””â”€â”€ /initialization        # í…ŒìŠ¤íŠ¸ ë°ì´í„° ì´ˆê¸°í™” (Emulator only)
```

### Database Design (Firestore)

#### Collections
- **students**: í•™ìƒ ì •ë³´
- **teachers**: êµì‚¬ ì •ë³´
- **classSections**: ìˆ˜ì—… ì •ë³´
- **courses**: ê³¼ëª© ì •ë³´
- **classrooms**: êµì‹¤ ì •ë³´
- **attendance**: ì¶œì„ ê¸°ë¡
- **studentTimetables**: í•™ìƒë³„ ì‹œê°„í‘œ
- **timetableVersions**: ì‹œê°„í‘œ ë²„ì „
- **seats**: ì¢Œì„ ì •ë³´
- **seatAssignments**: ì¢Œì„ ë°°ì •
- **parents**: ë¶€ëª¨ ì •ë³´
- **colors**: ìƒ‰ìƒ íŒ”ë ˆíŠ¸

#### Version-based Data Isolation
ëª¨ë“  ë°ì´í„°ëŠ” `versionId`ë¡œ ê²©ë¦¬ë©ë‹ˆë‹¤:
```typescript
// ClassSection
{
  id: string,
  name: string,
  versionId: string,  // ì¤‘ìš”!
  teacherId: string,
  courseId: string,
  // ...
}

// StudentTimetable
{
  studentId: string,
  versionId: string,  // ì¤‘ìš”!
  classSectionIds: string[],  // ê°™ì€ versionì˜ ìˆ˜ì—…ë“¤ë§Œ
  // ...
}
```

**ë²„ì „ ì‹œìŠ¤í…œì˜ ì£¼ìš” ì›ì¹™:**
1. ê° entityëŠ” íŠ¹ì • versionì— ì†í•¨
2. ë²„ì „ ê°„ ë°ì´í„°ëŠ” ê²©ë¦¬ë¨
3. í™œì„± ë²„ì „(isActive: true)ì€ í•˜ë‚˜ë§Œ ì¡´ì¬
4. versionId ì—†ì´ ì¿¼ë¦¬í•˜ë©´ ìë™ìœ¼ë¡œ í™œì„± ë²„ì „ ì‚¬ìš©

ìì„¸í•œ ë‚´ìš©ì€ [timetable-version-system-plan.md](timetable-version-system-plan.md) ì°¸ì¡°

---

## ğŸ“– ê°œë°œ ê°€ì´ë“œ

### Frontend ê°œë°œ

#### 1. ìƒˆë¡œìš´ Feature ì¶”ê°€

```bash
# Feature ë””ë ‰í† ë¦¬ ìƒì„±
mkdir -p frontend/src/features/myfeature/{components,hooks,pages,slice,types,utils}
```

**íŒŒì¼ êµ¬ì¡°:**
```typescript
// features/myfeature/slice/myfeatureSlice.ts
import { createSlice, createAsyncThunk } from '@reduxjs/toolkit'

export const fetchData = createAsyncThunk(
  'myfeature/fetchData',
  async () => {
    const response = await apiService.getData()
    return response.data
  }
)

const myfeatureSlice = createSlice({
  name: 'myfeature',
  initialState: { /* ... */ },
  reducers: { /* ... */ },
  extraReducers: (builder) => { /* ... */ }
})

export default myfeatureSlice.reducer
```

#### 2. API í˜¸ì¶œ

```typescript
// services/api.tsì— ë©”ì„œë“œ ì¶”ê°€
class ApiService {
  async getMyData(id: string): Promise<ApiResponse<MyData>> {
    return this.request(`/my-endpoint/${id}`, {
      method: 'GET'
    })
  }
}

// Featureì—ì„œ ì‚¬ìš©
import { apiService } from '@services/api'

const data = await apiService.getMyData('123')
```

#### 3. ë²„ì „ ê¸°ë°˜ ë°ì´í„° ë¡œë“œ

```typescript
// 1. í™œì„± ë²„ì „ ê°€ì ¸ì˜¤ê¸°
const versionResponse = await apiService.getActiveTimetableVersion()
const activeVersionId = versionResponse.data.id

// 2. ë²„ì „ë³„ ë°ì´í„° ì¿¼ë¦¬
const classes = await apiService.getClassSections(activeVersionId)
```

### Backend ê°œë°œ

#### 1. ìƒˆë¡œìš´ API ì—”ë“œí¬ì¸íŠ¸ ì¶”ê°€

**Controller ìƒì„±:**
```typescript
// functions/src/controllers/MyController.ts
export class MyController {
  constructor(private myService: MyService) {}

  async getData(req: Request, res: Response): Promise<void> {
    try {
      const versionId = req.query.versionId as string | undefined
      const data = await this.myService.getData(versionId)
      res.status(200).json({ success: true, data })
    } catch (error) {
      res.status(500).json({ success: false, error: error.message })
    }
  }
}
```

**Service ìƒì„±:**
```typescript
// functions/src/services/MyService.ts
export class MyService {
  constructor(private db: Firestore) {}

  async getData(versionId?: string): Promise<MyData[]> {
    // ë²„ì „ ìë™ í´ë°±
    let targetVersionId = versionId
    if (!targetVersionId) {
      const activeVersion = await this.versionService.getActiveVersion()
      targetVersionId = activeVersion.id
    }

    const snapshot = await this.db
      .collection('myCollection')
      .where('versionId', '==', targetVersionId)
      .get()

    return snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }))
  }
}
```

**Route ë“±ë¡:**
```typescript
// functions/src/routes/myRoutes.ts
const router = Router()
const controller = new MyController(new MyService(db))

router.get('/', controller.getData.bind(controller))

export default router
```

**index.tsì— ë§ˆìš´íŠ¸:**
```typescript
// functions/src/index.ts
import myRoutes from './routes/myRoutes'

app.use('/api/my-endpoint', myRoutes)
```

#### 2. ë²„ì „ ê¸°ë°˜ ì¿¼ë¦¬ íŒ¨í„´

```typescript
// âŒ ì˜ëª»ëœ ë°©ë²•
const classes = await db.collection('classSections').get()

// âœ… ì˜¬ë°”ë¥¸ ë°©ë²•
const classes = await db
  .collection('classSections')
  .where('versionId', '==', versionId)
  .get()
```

### Shared Module

ê³µí†µ íƒ€ì…ì´ë‚˜ ìƒìˆ˜ë¥¼ ì¶”ê°€í•  ë•Œ:

```typescript
// shared/types/myTypes.ts
export interface MyType {
  id: string
  name: string
}

// shared/index.tsì—ì„œ export
export * from './types/myTypes'

// í”„ë¡ íŠ¸ì—”ë“œ/ë°±ì—”ë“œì—ì„œ ì‚¬ìš©
import { MyType } from '@wiseup/shared'
```

**ì¤‘ìš”:** Shared ìˆ˜ì • í›„ ë°˜ë“œì‹œ ë¹Œë“œ:
```bash
cd shared && npx tsc
```

---

## ğŸ”§ ë¹Œë“œ ë° ë°°í¬

### ë¹Œë“œ ëª…ë ¹ì–´

```bash
# Shared ëª¨ë“ˆ ë¹Œë“œ
cd shared && npx tsc

# Frontend ë¹Œë“œ
cd frontend
npm run build              # í”„ë¡œë•ì…˜ ë¹Œë“œ (.env ì‚¬ìš©)
npm run build:test         # í…ŒìŠ¤íŠ¸ ë¹Œë“œ (.env.test ì‚¬ìš©)
npm run build:local        # ë¡œì»¬ ë¹Œë“œ (.env.local ì‚¬ìš©)

# Backend ë¹Œë“œ
cd functions
npm run build              # TypeScript ì»´íŒŒì¼ + í›„ì²˜ë¦¬
```

**ë¹Œë“œ ìˆœì„œ (ì¤‘ìš”!):**
1. Shared (`cd shared && npx tsc`)
2. Functions (`cd functions && npm run build`)
3. Frontend (`cd frontend && npm run build`)

### ë°°í¬ ìŠ¤í¬ë¦½íŠ¸ (ê¶Œì¥)

```bash
./deploy.sh
```

**`deploy.sh` ì¸í„°ë™í‹°ë¸Œ ë°°í¬ ê³¼ì •:**
1. Firebase í”„ë¡œì íŠ¸ ì„ íƒ (production / test)
2. ê¸°ì¡´ ë¹Œë“œ íŒŒì¼ ì •ë¦¬
3. Shared â†’ Frontend â†’ Functions ìˆœì„œëŒ€ë¡œ ë¹Œë“œ
4. ë°°í¬ íƒ€ì… ì„ íƒ:
   - Full deployment (hosting + functions)
   - Hosting only
   - Functions only
5. Firebase ë°°í¬ ì‹¤í–‰

### ìˆ˜ë™ ë°°í¬

```bash
# Firebase í”„ë¡œì íŠ¸ ì„ íƒ
firebase use production  # ë˜ëŠ” test

# ì „ì²´ ë°°í¬
firebase deploy

# Hostingë§Œ ë°°í¬
firebase deploy --only hosting

# Functionsë§Œ ë°°í¬
firebase deploy --only functions
```

### í™˜ê²½ë³„ ë°°í¬

**í”„ë¡œë•ì…˜:**
```bash
firebase use production
cd frontend && npm run build  # .env ì‚¬ìš©
cd ../functions && npm run build
firebase deploy
```

**í…ŒìŠ¤íŠ¸:**
```bash
firebase use test
cd frontend && npm run build:test  # .env.test ì‚¬ìš©
cd ../functions && npm run build
firebase deploy
```

---

## ğŸ“š ë¬¸ì„œ

### ì£¼ìš” ë¬¸ì„œ
- **[CLAUDE.md](CLAUDE.md)**: Claude Codeë¥¼ ìœ„í•œ í”„ë¡œì íŠ¸ ê°€ì´ë“œ (ê°€ì¥ ì¤‘ìš”!)
- **[database_structure.md](database_structure.md)**: Firestore ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ
- **[FIRESTORE_INDEXES.md](FIRESTORE_INDEXES.md)**: í•„ìˆ˜ Firestore ì¸ë±ìŠ¤

### ì•„í‚¤í…ì²˜ ë¬¸ì„œ
- **[timetable-version-system-plan.md](timetable-version-system-plan.md)**: ì‹œê°„í‘œ ë²„ì „ ì‹œìŠ¤í…œ ìƒì„¸ ì„¤ê³„
- **[VERSION_BASED_CLASS_TEACHER_PLAN.md](VERSION_BASED_CLASS_TEACHER_PLAN.md)**: ìˆ˜ì—…/êµì‚¬ ë²„ì „ ê´€ë¦¬
- **[ACTIVE_VERSION_PLAN_REVIEW.md](ACTIVE_VERSION_PLAN_REVIEW.md)**: í™œì„± ë²„ì „ êµ¬í˜„ ë¦¬ë·°

### êµ¬í˜„ ë¬¸ì„œ
- **[EDIT_MODAL_IMPLEMENTATION_PLAN.md](EDIT_MODAL_IMPLEMENTATION_PLAN.md)**: ëª¨ë‹¬ ë‹¤ì´ì–¼ë¡œê·¸ êµ¬í˜„ íŒ¨í„´
- **[IMPLEMENTATION_SUMMARY.md](IMPLEMENTATION_SUMMARY.md)**: ì „ì²´ êµ¬í˜„ ìš”ì•½
- **[STUDENT_ENROLLMENT_VERSION_FIX.md](STUDENT_ENROLLMENT_VERSION_FIX.md)**: í•™ìƒ ë“±ë¡ ë²„ì „ ë§ˆì´ê·¸ë ˆì´ì…˜

### ìµœì í™” ë¬¸ì„œ
- **[BULK_TIMETABLE_DOWNLOAD_OPTIMIZATION_PLAN.md](BULK_TIMETABLE_DOWNLOAD_OPTIMIZATION_PLAN.md)**: ëŒ€ëŸ‰ ì‹œê°„í‘œ ë‹¤ìš´ë¡œë“œ ìµœì í™”
- **[TIMETABLE_RENDER_COMPLETE_CALLBACK_PLAN.md](TIMETABLE_RENDER_COMPLETE_CALLBACK_PLAN.md)**: ì‹œê°„í‘œ ë Œë”ë§ ì½œë°± êµ¬í˜„

### ê¸°íƒ€ ê³„íš ë¬¸ì„œ
- classpage-timetable-integration-plan.md
- schedule-page-implementation-plan.md
- class-section-color-implementation-plan.md
- class-detail-modal-commonization-plan.md
- VERSION_IMPLEMENTATION_ISSUES.md
- VERSION_ADDITIONAL_ISSUES.md
- OPTIMIZATION_PLAN_VERIFICATION.md

---

## ğŸ› íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### í¬íŠ¸ ì¶©ëŒ
```bash
# dev.shê°€ ìë™ìœ¼ë¡œ ì²˜ë¦¬í•˜ì§€ë§Œ, ìˆ˜ë™ìœ¼ë¡œ ì£½ì´ë ¤ë©´:
lsof -ti:5173 | xargs kill -9  # Frontend
lsof -ti:5001 | xargs kill -9  # Functions
lsof -ti:8080 | xargs kill -9  # Firestore
```

### ë¹Œë“œ ì—ëŸ¬

**"Module not found" ì—ëŸ¬:**
```bash
# Shared ëª¨ë“ˆ ì¬ë¹Œë“œ
cd shared && npx tsc

# node_modules ì¬ì„¤ì¹˜
rm -rf node_modules package-lock.json
npm install
```

**TypeScript ì»´íŒŒì¼ ì—ëŸ¬:**
```bash
# ê° í”„ë¡œì íŠ¸ì—ì„œ íƒ€ì… ì²´í¬
cd frontend && npx tsc --noEmit
cd ../functions && npx tsc --noEmit
```

### Firebase Emulator ë¬¸ì œ

```bash
# Emulator ë°ì´í„° ì´ˆê¸°í™”
firebase emulators:start --import=./emulator-data --export-on-exit

# Emulator ì™„ì „ ì¬ì‹œì‘
pkill -f firebase
./dev.sh
```

### ì‹œê°„í‘œ ìº¡ì³ ì´ìŠˆ

**ë¹ˆ ì‹œê°„í‘œê°€ ìº¡ì³ë˜ëŠ” ê²½ìš°:**
- ìµœì‹  ì½”ë“œì—ëŠ” `onRenderComplete` ì½œë°±ì´ êµ¬í˜„ë˜ì–´ ìˆìŒ
- ë Œë”ë§ ì™„ë£Œ í›„ ìº¡ì³í•˜ë„ë¡ ìˆ˜ì •ë¨
- ìì„¸í•œ ë‚´ìš©: [TIMETABLE_RENDER_COMPLETE_CALLBACK_PLAN.md](TIMETABLE_RENDER_COMPLETE_CALLBACK_PLAN.md)

---

## ğŸ“‹ ì½”ë”© ì»¨ë²¤ì…˜

### TypeScript
- **ì¸í„°í˜ì´ìŠ¤**: PascalCase (`StudentData`, `ApiResponse`)
- **íƒ€ì…**: PascalCase (`RequestType`, `ResponseStatus`)
- **ë³€ìˆ˜/í•¨ìˆ˜**: camelCase (`fetchStudents`, `activeVersionId`)
- **ìƒìˆ˜**: UPPER_SNAKE_CASE (`API_BASE_URL`, `MAX_RETRIES`)
- **íŒŒì¼ëª…**: kebab-case (`student-service.ts`, `api-config.ts`)

### React ì»´í¬ë„ŒíŠ¸
- **ì»´í¬ë„ŒíŠ¸**: PascalCase (`StudentTable.tsx`, `TimetableWidget.tsx`)
- **Props ì¸í„°í˜ì´ìŠ¤**: `{ComponentName}Props` (`StudentTableProps`)
- **Hook**: `use` prefix (`useStudents`, `useTimetable`)

### CSS
- **í´ë˜ìŠ¤ëª…**: kebab-case (`.timetable-widget`, `.student-table`)
- **BEM ë°©ë²•ë¡ **: `.block__element--modifier`

### Git Commit
```
feat: ìƒˆë¡œìš´ ê¸°ëŠ¥ ì¶”ê°€
fix: ë²„ê·¸ ìˆ˜ì •
docs: ë¬¸ì„œ ìˆ˜ì •
style: ì½”ë“œ í¬ë§·íŒ…
refactor: ì½”ë“œ ë¦¬íŒ©í† ë§
test: í…ŒìŠ¤íŠ¸ ì½”ë“œ
chore: ë¹Œë“œ/ì„¤ì • ë³€ê²½
```

---

## ğŸ¤ ê¸°ì—¬ ê°€ì´ë“œ

1. Feature branch ìƒì„±: `git checkout -b feature/my-feature`
2. ë³€ê²½ì‚¬í•­ ì»¤ë°‹: `git commit -m 'feat: add some feature'`
3. Branchì— Push: `git push origin feature/my-feature`
4. Pull Request ìƒì„±

---

## ğŸ“ ì—°ë½ì²˜

í”„ë¡œì íŠ¸ ê´€ë ¨ ë¬¸ì˜ì‚¬í•­ì€ ì´ìŠˆë¥¼ ë“±ë¡í•´ì£¼ì„¸ìš”.

---

## ğŸ“œ ë¼ì´ì„¼ìŠ¤

ë³¸ í”„ë¡œì íŠ¸ëŠ” ë¹„ê³µê°œ í”„ë¡œì íŠ¸ì…ë‹ˆë‹¤.

---

## ğŸ‰ ìµœê·¼ ì—…ë°ì´íŠ¸

### 2025-01-07
- âœ… ì‹œê°„í‘œ ë Œë”ë§ ì™„ë£Œ ì½œë°± êµ¬í˜„ (`onRenderComplete`)
- âœ… ëŒ€ëŸ‰ ì‹œê°„í‘œ ë‹¤ìš´ë¡œë“œ ìµœì í™” (195s â†’ 71s, 50ëª… ê¸°ì¤€)
- âœ… ì‹œê°„í‘œ ìº¡ì³ ì•ˆì •ì„± ê°œì„  (ì‹¤íŒ¨ìœ¨ 30% â†’ ~0%)
- âœ… README.md ì „ë©´ ê°œí¸ (í”„ë¡œì íŠ¸ êµ¬ì¡°, ê°œë°œ ê°€ì´ë“œ ì¶”ê°€)

### 2024 Q4
- âœ… ë²„ì „ ê¸°ë°˜ ì‹œê°„í‘œ ì‹œìŠ¤í…œ êµ¬í˜„
- âœ… ë“œë˜ê·¸ ì•¤ ë“œë¡­ ì‹œê°„í‘œ í¸ì§‘
- âœ… ì¶œì„ ê´€ë¦¬ ì‹œìŠ¤í…œ êµ¬ì¶•
- âœ… Redux Toolkit ìƒíƒœ ê´€ë¦¬ ë„ì…
- âœ… Ant Design UI ë¼ì´ë¸ŒëŸ¬ë¦¬ ì ìš©

---

**Built with â¤ï¸ by WiseUp Team**
