# ğŸ”§ WiseUp Management System - Backend API

Firebase Functionsë¥¼ ì‚¬ìš©í•œ ë°±ì—”ë“œ API ì„œë²„ì…ë‹ˆë‹¤.

## ğŸ—ï¸ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
functions/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ index.ts              # ë©”ì¸ ì§„ì…ì 
â”‚   â”œâ”€â”€ config/               # ì„¤ì • íŒŒì¼ë“¤
â”‚   â”œâ”€â”€ common/               # ê³µí†µ ìœ í‹¸ë¦¬í‹°
â”‚   â”‚   â”œâ”€â”€ errorHandler.ts   # ì—ëŸ¬ í•¸ë“¤ëŸ¬
â”‚   â”‚   â”œâ”€â”€ asyncWrap.ts      # ë¹„ë™ê¸° ë˜í¼
â”‚   â”‚   â””â”€â”€ validator.ts      # ê²€ì¦ ìœ í‹¸ë¦¬í‹°
â”‚   â””â”€â”€ modules/              # ë„ë©”ì¸ë³„ ëª¨ë“ˆ
â”‚       â”œâ”€â”€ auth/             # ì¸ì¦ ê´€ë¦¬
â”‚       â”œâ”€â”€ users/            # ì‚¬ìš©ì ê´€ë¦¬
â”‚       â”œâ”€â”€ students/         # í•™ìƒ ê´€ë¦¬
â”‚       â”œâ”€â”€ teachers/         # ì„ ìƒë‹˜ ê´€ë¦¬
â”‚       â”œâ”€â”€ subjects/         # ê³¼ëª© ê´€ë¦¬
â”‚       â”œâ”€â”€ classes/          # ë°˜ ê´€ë¦¬
â”‚       â”œâ”€â”€ attendance/       # ì¶œì„ ê´€ë¦¬
â”‚       â”œâ”€â”€ schedules/        # ì¼ì • ê´€ë¦¬
â”‚       â”œâ”€â”€ roles/            # ì—­í•  ê´€ë¦¬
â”‚       â”œâ”€â”€ parents/          # ë¶€ëª¨ ê´€ë¦¬
â”‚       â”œâ”€â”€ user_roles/       # ì‚¬ìš©ì-ì—­í•  ê´€ê³„
â”‚       â”œâ”€â”€ teacher_subjects/ # ì„ ìƒë‹˜-ê³¼ëª© ê´€ê³„
â”‚       â””â”€â”€ class_students/   # ë°˜-í•™ìƒ ê´€ê³„
```

## ğŸš€ ì‹¤í–‰ ë°©ë²•

### ê°œë°œ í™˜ê²½
```bash
# ì˜ì¡´ì„± ì„¤ì¹˜
npm install

# TypeScript ë¹Œë“œ
npm run build

# Firebase Emulator ì‹¤í–‰
firebase emulators:start --only functions
```

### í”„ë¡œë•ì…˜ ë°°í¬
```bash
# ë°°í¬
npm run deploy

# ë¡œê·¸ í™•ì¸
npm run logs
```

## ğŸ“¡ API ì—”ë“œí¬ì¸íŠ¸

### ğŸ” ì¸ì¦ ê´€ë¦¬ (`/auth`)

#### íšŒì›ê°€ì…
- **POST** `/auth/register`
- **ì„¤ëª…**: ìƒˆë¡œìš´ ì‚¬ìš©ì ë“±ë¡
- **ìš”ì²­ ë³¸ë¬¸**:
  ```json
  {
    "name": "í™ê¸¸ë™",
    "phone": "010-1234-5678",
    "email": "hong@example.com",
    "password": "SecurePass123!"
  }
  ```

#### ë¡œê·¸ì¸
- **POST** `/auth/login`
- **ì„¤ëª…**: ì‚¬ìš©ì ë¡œê·¸ì¸
- **ìš”ì²­ ë³¸ë¬¸**:
  ```json
  {
    "email": "hong@example.com",
    "password": "SecurePass123!"
  }
  ```

#### ë¡œê·¸ì•„ì›ƒ
- **POST** `/auth/logout/:id`
- **ì„¤ëª…**: ì‚¬ìš©ì ë¡œê·¸ì•„ì›ƒ
- **ê²½ë¡œ ë§¤ê°œë³€ìˆ˜**: `id` (ì‚¬ìš©ì ID)

#### ë¹„ë°€ë²ˆí˜¸ ë³€ê²½
- **PUT** `/auth/password/:id`
- **ì„¤ëª…**: ì‚¬ìš©ì ë¹„ë°€ë²ˆí˜¸ ë³€ê²½
- **ìš”ì²­ ë³¸ë¬¸**:
  ```json
  {
    "currentPassword": "OldPass123!",
    "newPassword": "NewPass456!"
  }
  ```

#### ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì • ìš”ì²­
- **POST** `/auth/password/reset`
- **ì„¤ëª…**: ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì • ì´ë©”ì¼ ë°œì†¡
- **ìš”ì²­ ë³¸ë¬¸**:
  ```json
  {
    "email": "hong@example.com"
  }
  ```

#### ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì • í™•ì¸
- **POST** `/auth/password/confirm`
- **ì„¤ëª…**: ì¬ì„¤ì • í† í°ìœ¼ë¡œ ìƒˆ ë¹„ë°€ë²ˆí˜¸ ì„¤ì •
- **ìš”ì²­ ë³¸ë¬¸**:
  ```json
  {
    "token": "reset_token_here",
    "newPassword": "NewPass456!"
  }
  ```

#### í† í° ê²€ì¦
- **POST** `/auth/verify`
- **ì„¤ëª…**: JWT í† í° ê²€ì¦
- **ìš”ì²­ ë³¸ë¬¸**:
  ```json
  {
    "token": "jwt_token_here"
  }
  ```

#### í† í° ê°±ì‹ 
- **POST** `/auth/refresh`
- **ì„¤ëª…**: JWT í† í° ê°±ì‹ 
- **ìš”ì²­ ë³¸ë¬¸**:
  ```json
  {
    "token": "jwt_token_here",
    "refreshToken": "refresh_token_here"
  }
  ```

### ğŸ‘¥ ì‚¬ìš©ì ê´€ë¦¬ (`/users`)

#### ì „ì²´ ì‚¬ìš©ì ì¡°íšŒ
- **GET** `/users`
- **ì„¤ëª…**: ëª¨ë“  ì‚¬ìš©ì ëª©ë¡ ì¡°íšŒ

#### ì‚¬ìš©ì ìƒì„±
- **POST** `/users`
- **ì„¤ëª…**: ìƒˆë¡œìš´ ì‚¬ìš©ì ìƒì„±
- **ìš”ì²­ ë³¸ë¬¸**:
  ```json
  {
    "name": "í™ê¸¸ë™",
    "email": "hong@example.com",
    "phone": "010-1234-5678",
    "status": "active"
  }
  ```

#### ì‚¬ìš©ì ê²€ìƒ‰ (í•„í„°)
- **GET** `/users/search`
- **ì„¤ëª…**: í•„í„°ë¥¼ ì‚¬ìš©í•œ ì‚¬ìš©ì ê²€ìƒ‰
- **ì¿¼ë¦¬ ë§¤ê°œë³€ìˆ˜**:
  - `status`: ì‚¬ìš©ì ìƒíƒœ (active/inactive)
  - `email`: ì´ë©”ì¼ (ì •í™•í•œ ì¼ì¹˜)
  - `phone`: ì „í™”ë²ˆí˜¸ (ì •í™•í•œ ì¼ì¹˜)
  - `name`: ì´ë¦„ (ë¶€ë¶„ ì¼ì¹˜)
- **ì˜ˆì‹œ**:
  ```
  GET /users/search?status=active&name=ê¹€ì² ìˆ˜
  GET /users/search?email=test@example.com
  ```

#### íŠ¹ì • ì‚¬ìš©ì ì¡°íšŒ
- **GET** `/users/:id`
- **ì„¤ëª…**: íŠ¹ì • ì‚¬ìš©ì ì •ë³´ ì¡°íšŒ

#### ì´ë©”ì¼ë¡œ ì‚¬ìš©ì ì¡°íšŒ
- **GET** `/users/email/:email`
- **ì„¤ëª…**: ì´ë©”ì¼ë¡œ ì‚¬ìš©ì ê²€ìƒ‰

#### ì‚¬ìš©ì ìˆ˜ì •
- **PUT** `/users/:id`
- **ì„¤ëª…**: ì‚¬ìš©ì ì •ë³´ ìˆ˜ì • (ë¹„ë°€ë²ˆí˜¸ ì œì™¸)

#### ì‚¬ìš©ì ì‚­ì œ
- **DELETE** `/users/:id`
- **ì„¤ëª…**: ì‚¬ìš©ì ì‚­ì œ

#### ì´ë©”ì¼ ì¤‘ë³µ í™•ì¸
- **GET** `/users/check/email/:email`
- **ì„¤ëª…**: ì´ë©”ì¼ ì‚¬ìš© ê°€ëŠ¥ ì—¬ë¶€ í™•ì¸

#### ì „í™”ë²ˆí˜¸ ì¤‘ë³µ í™•ì¸
- **GET** `/users/check/phone/:phone`
- **ì„¤ëª…**: ì „í™”ë²ˆí˜¸ ì‚¬ìš© ê°€ëŠ¥ ì—¬ë¶€ í™•ì¸ (URL ì¸ì½”ë”© í•„ìš”)

### ğŸ“š í•™ìƒ ê´€ë¦¬ (`/students`)

#### ì „ì²´ í•™ìƒ ì¡°íšŒ
- **GET** `/students`
- **ì„¤ëª…**: ëª¨ë“  í•™ìƒ ëª©ë¡ ì¡°íšŒ

#### í•™ìƒ ìƒì„±
- **POST** `/students`
- **ì„¤ëª…**: ìƒˆë¡œìš´ í•™ìƒ ë“±ë¡
- **ìš”ì²­ ë³¸ë¬¸**:
  ```json
  {
    "user_id": "user_id_here",
    "name": "ê¹€í•™ìƒ",
    "school": "ì„œìš¸ê³ ë“±í•™êµ",
    "grade": "2í•™ë…„"
  }
  ```

#### íŠ¹ì • í•™ìƒ ì¡°íšŒ
- **GET** `/students/:studentId`
- **ì„¤ëª…**: íŠ¹ì • í•™ìƒ ì •ë³´ ì¡°íšŒ

#### User IDë¡œ í•™ìƒ ì¡°íšŒ
- **GET** `/students/user/:userId`
- **ì„¤ëª…**: User IDë¡œ í•™ìƒ ê²€ìƒ‰

#### í•™ìƒê³¼ ì‚¬ìš©ì ì •ë³´ í•¨ê»˜ ì¡°íšŒ
- **GET** `/students/:studentId/with-user`
- **ì„¤ëª…**: í•™ìƒ ì •ë³´ì™€ ì—°ê´€ëœ ì‚¬ìš©ì ì •ë³´ í•¨ê»˜ ì¡°íšŒ

#### í•™ìƒ ìˆ˜ì •
- **PUT** `/students/:studentId`
- **ì„¤ëª…**: í•™ìƒ ì •ë³´ ìˆ˜ì •

#### í•™ìƒ ì‚­ì œ
- **DELETE** `/students/:studentId`
- **ì„¤ëª…**: í•™ìƒ ì‚­ì œ

#### í•„í„°ë¡œ í•™ìƒ ê²€ìƒ‰
- **GET** `/students/filter/search`
- **ì„¤ëª…**: í•„í„°ë¥¼ ì‚¬ìš©í•œ í•™ìƒ ê²€ìƒ‰
- **ì¿¼ë¦¬ ë§¤ê°œë³€ìˆ˜**:
  - `user_id`: ì‚¬ìš©ì ID
  - `name`: í•™ìƒ ì´ë¦„
  - `school`: í•™êµëª…
  - `grade`: í•™ë…„

#### ë¶€ëª¨-í•™ìƒ ê´€ê³„ ìƒì„±
- **POST** `/students/parent-relation`
- **ì„¤ëª…**: ë¶€ëª¨ì™€ í•™ìƒ ê°„ì˜ ê´€ê³„ ìƒì„±
- **ìš”ì²­ ë³¸ë¬¸**:
  ```json
  {
    "parent_id": "parent_id_here",
    "student_id": "student_id_here"
  }
  ```

#### í•™ìƒì˜ ë¶€ëª¨ ëª©ë¡ ì¡°íšŒ
- **GET** `/students/:studentId/parents`
- **ì„¤ëª…**: íŠ¹ì • í•™ìƒì˜ ë¶€ëª¨ ëª©ë¡ ì¡°íšŒ

#### ë¶€ëª¨ì˜ í•™ìƒ ëª©ë¡ ì¡°íšŒ
- **GET** `/students/parent/:parentId/students`
- **ì„¤ëª…**: íŠ¹ì • ë¶€ëª¨ì˜ í•™ìƒ ëª©ë¡ ì¡°íšŒ

### ğŸ‘¨â€ğŸ« ì„ ìƒë‹˜ ê´€ë¦¬ (`/teachers`)

#### ì „ì²´ ì„ ìƒë‹˜ ì¡°íšŒ
- **GET** `/teachers`
- **ì„¤ëª…**: ëª¨ë“  ì„ ìƒë‹˜ ëª©ë¡ ì¡°íšŒ

#### íŠ¹ì • ì„ ìƒë‹˜ ì¡°íšŒ
- **GET** `/teachers/:id`
- **ì„¤ëª…**: íŠ¹ì • ì„ ìƒë‹˜ ì •ë³´ ì¡°íšŒ

#### ì„ ìƒë‹˜ ìƒì„±
- **POST** `/teachers`
- **ì„¤ëª…**: ìƒˆë¡œìš´ ì„ ìƒë‹˜ ë“±ë¡
- **ìš”ì²­ ë³¸ë¬¸**:
  ```json
  {
    "user_id": "user_id_here",
    "teacher_name": "ë°•ì„ ìƒë‹˜",
    "teacher_bio": "ìˆ˜í•™ ì „ë¬¸ ì„ ìƒë‹˜"
  }
  ```

#### ì„ ìƒë‹˜ ìˆ˜ì •
- **PUT** `/teachers/:id`
- **ì„¤ëª…**: ì„ ìƒë‹˜ ì •ë³´ ìˆ˜ì •

#### ì„ ìƒë‹˜ ì‚­ì œ
- **DELETE** `/teachers/:id`
- **ì„¤ëª…**: ì„ ìƒë‹˜ ì‚­ì œ

### ğŸ“– ê³¼ëª© ê´€ë¦¬ (`/subjects`)

#### ì „ì²´ ê³¼ëª© ì¡°íšŒ
- **GET** `/subjects`
- **ì„¤ëª…**: ëª¨ë“  ê³¼ëª© ëª©ë¡ ì¡°íšŒ

#### ê³¼ëª© ìƒì„±
- **POST** `/subjects`
- **ì„¤ëª…**: ìƒˆë¡œìš´ ê³¼ëª© ìƒì„±
- **ìš”ì²­ ë³¸ë¬¸**:
  ```json
  {
    "subject_name": "ìˆ˜í•™",
    "subject_description": "ê³ ë“±í•™êµ ìˆ˜í•™"
  }
  ```

#### ê³¼ëª© ê²€ìƒ‰ (í•„í„°)
- **GET** `/subjects/search`
- **ì„¤ëª…**: í•„í„°ë¥¼ ì‚¬ìš©í•œ ê³¼ëª© ê²€ìƒ‰
- **ì¿¼ë¦¬ ë§¤ê°œë³€ìˆ˜**:
  - `name`: ê³¼ëª©ëª… (ë¶€ë¶„ ì¼ì¹˜)
- **ì˜ˆì‹œ**:
  ```
  GET /subjects/search?name=ìˆ˜í•™
  ```

#### íŠ¹ì • ê³¼ëª© ì¡°íšŒ
- **GET** `/subjects/:id`
- **ì„¤ëª…**: íŠ¹ì • ê³¼ëª© ì •ë³´ ì¡°íšŒ

#### ê³¼ëª©ê³¼ ì„ ìƒë‹˜ ì •ë³´ í•¨ê»˜ ì¡°íšŒ
- **GET** `/subjects/:id/with-teachers`
- **ì„¤ëª…**: ê³¼ëª© ì •ë³´ì™€ ì—°ê´€ëœ ì„ ìƒë‹˜ ì •ë³´ í•¨ê»˜ ì¡°íšŒ

#### ê³¼ëª©ê³¼ ë°˜ ì •ë³´ í•¨ê»˜ ì¡°íšŒ
- **GET** `/subjects/:id/with-classes`
- **ì„¤ëª…**: ê³¼ëª© ì •ë³´ì™€ ì—°ê´€ëœ ë°˜ ì •ë³´ í•¨ê»˜ ì¡°íšŒ

#### ê³¼ëª©ëª… ì¤‘ë³µ í™•ì¸
- **GET** `/subjects/check/:name`
- **ì„¤ëª…**: ê³¼ëª©ëª… ì‚¬ìš© ê°€ëŠ¥ ì—¬ë¶€ í™•ì¸

#### ê³¼ëª© ìˆ˜ì •
- **PUT** `/subjects/:id`
- **ì„¤ëª…**: ê³¼ëª© ì •ë³´ ìˆ˜ì •

#### ê³¼ëª© ì‚­ì œ
- **DELETE** `/subjects/:id`
- **ì„¤ëª…**: ê³¼ëª© ì‚­ì œ

### ğŸ« ë°˜ ê´€ë¦¬ (`/classes`)

#### ë°˜ ìƒì„±
- **POST** `/classes`
- **ì„¤ëª…**: ìƒˆë¡œìš´ ë°˜ ìƒì„±
- **ìš”ì²­ ë³¸ë¬¸**:
  ```json
  {
    "class_name": "2í•™ë…„ 1ë°˜",
    "subject_id": "subject_id_here",
    "max_students": 30
  }
  ```

#### ë°˜ ì¡°íšŒ (í•„í„°)
- **GET** `/classes`
- **ì„¤ëª…**: í•„í„°ë¥¼ ì‚¬ìš©í•œ ë°˜ ì¡°íšŒ
- **ì¿¼ë¦¬ ë§¤ê°œë³€ìˆ˜**: ClassFilter ìŠ¤í‚¤ë§ˆì— ë”°ë¼ í•„í„°ë§

#### ëª¨ë“  ë°˜ ì¡°íšŒ
- **GET** `/classes/all`
- **ì„¤ëª…**: í•„í„° ì—†ì´ ëª¨ë“  ë°˜ ì¡°íšŒ

#### íŠ¹ì • ë°˜ ì¡°íšŒ
- **GET** `/classes/:id`
- **ì„¤ëª…**: íŠ¹ì • ë°˜ ì •ë³´ ì¡°íšŒ

#### ë°˜ê³¼ ì„ ìƒë‹˜ ì •ë³´ í•¨ê»˜ ì¡°íšŒ
- **GET** `/classes/:id/with-teacher`
- **ì„¤ëª…**: ë°˜ ì •ë³´ì™€ ì—°ê´€ëœ ì„ ìƒë‹˜ ì •ë³´ í•¨ê»˜ ì¡°íšŒ

#### ë°˜ê³¼ ê³¼ëª© ì •ë³´ í•¨ê»˜ ì¡°íšŒ
- **GET** `/classes/:id/with-subject`
- **ì„¤ëª…**: ë°˜ ì •ë³´ì™€ ì—°ê´€ëœ ê³¼ëª© ì •ë³´ í•¨ê»˜ ì¡°íšŒ

#### ë°˜ê³¼ í•™ìƒ ì •ë³´ í•¨ê»˜ ì¡°íšŒ
- **GET** `/classes/:id/with-students`
- **ì„¤ëª…**: ë°˜ ì •ë³´ì™€ ì—°ê´€ëœ í•™ìƒ ì •ë³´ í•¨ê»˜ ì¡°íšŒ

#### ë°˜ê³¼ ëª¨ë“  ê´€ë ¨ ì •ë³´ í•¨ê»˜ ì¡°íšŒ
- **GET** `/classes/:id/with-details`
- **ì„¤ëª…**: ë°˜ ì •ë³´ì™€ ëª¨ë“  ê´€ë ¨ ì •ë³´(ì„ ìƒë‹˜, ê³¼ëª©, í•™ìƒ) í•¨ê»˜ ì¡°íšŒ

#### ë°˜ëª… ì¤‘ë³µ í™•ì¸
- **GET** `/classes/check/:name`
- **ì„¤ëª…**: ë°˜ëª… ì‚¬ìš© ê°€ëŠ¥ ì—¬ë¶€ í™•ì¸

#### ë°˜ ìˆ˜ì •
- **PUT** `/classes/:id`
- **ì„¤ëª…**: ë°˜ ì •ë³´ ìˆ˜ì •

#### ë°˜ ì‚­ì œ
- **DELETE** `/classes/:id`
- **ì„¤ëª…**: ë°˜ ì‚­ì œ

### âœ… ì¶œì„ ê´€ë¦¬ (`/attendance`)

#### ì¶œì„ ìƒì„±
- **POST** `/attendance`
- **ì„¤ëª…**: ìƒˆë¡œìš´ ì¶œì„ ê¸°ë¡ ìƒì„±
- **ìš”ì²­ ë³¸ë¬¸**:
  ```json
  {
    "student_id": "student_id_here",
    "class_id": "class_id_here",
    "att_date": "2024-01-15",
    "att_status": "present",
    "att_reason": "ì •ìƒ ì¶œì„"
  }
  ```

#### ì „ì²´ ì¶œì„ ì¡°íšŒ
- **GET** `/attendance`
- **ì„¤ëª…**: ëª¨ë“  ì¶œì„ ê¸°ë¡ ì¡°íšŒ

#### íŠ¹ì • ì¶œì„ ì¡°íšŒ
- **GET** `/attendance/:attendanceId`
- **ì„¤ëª…**: íŠ¹ì • ì¶œì„ ê¸°ë¡ ì¡°íšŒ

#### ì¶œì„ ìˆ˜ì •
- **PUT** `/attendance/:attendanceId`
- **ì„¤ëª…**: ì¶œì„ ê¸°ë¡ ìˆ˜ì •

#### ì¶œì„ ì‚­ì œ
- **DELETE** `/attendance/:attendanceId`
- **ì„¤ëª…**: ì¶œì„ ê¸°ë¡ ì‚­ì œ

#### í•™ìƒë³„ ë‚ ì§œë³„ ì¶œì„ ì¡°íšŒ
- **GET** `/attendance/student/:studentId/date/:date`
- **ì„¤ëª…**: íŠ¹ì • í•™ìƒì˜ íŠ¹ì • ë‚ ì§œ ì¶œì„ ì¡°íšŒ

#### ì¶œì„/í‡´ì‹¤ ì²´í¬
- **POST** `/attendance/checkinout`
- **ì„¤ëª…**: í•™ìƒ ì¶œì„/í‡´ì‹¤ ì²´í¬

#### í•™ìƒë³„ ì¶œì„ í†µê³„
- **GET** `/attendance/student/:studentId/stats`
- **ì„¤ëª…**: íŠ¹ì • í•™ìƒì˜ ì¶œì„ í†µê³„ ì¡°íšŒ

#### ì¼ë³„ ì¶œì„ ìš”ì•½
- **GET** `/attendance/daily/:date/summary`
- **ì„¤ëª…**: íŠ¹ì • ë‚ ì§œì˜ ì¶œì„ ìš”ì•½ ì¡°íšŒ

#### í•™ìƒë³„ ì¶œì„ ìš”ì•½
- **GET** `/attendance/summaries`
- **ì„¤ëª…**: ëª¨ë“  í•™ìƒì˜ ì¶œì„ ìš”ì•½ ì¡°íšŒ

### ğŸ“… ì¼ì • ê´€ë¦¬ (`/schedules`)

#### ì¼ì • ìƒì„±
- **POST** `/schedules`
- **ì„¤ëª…**: ìƒˆë¡œìš´ ì¼ì • ìƒì„±
- **ìš”ì²­ ë³¸ë¬¸**:
  ```json
  {
    "room_id": "room_id_here",
    "start_time": "2024-01-15T09:00:00Z",
    "end_time": "2024-01-15T10:00:00Z",
    "schedule_type": "class",
    "title": "ìˆ˜í•™ ìˆ˜ì—…",
    "description": "2í•™ë…„ 1ë°˜ ìˆ˜í•™ ìˆ˜ì—…"
  }
  ```

#### ì¼ì • ëª©ë¡ ì¡°íšŒ (í•„í„°)
- **GET** `/schedules`
- **ì„¤ëª…**: í•„í„°ë¥¼ ì‚¬ìš©í•œ ì¼ì • ëª©ë¡ ì¡°íšŒ
- **ì¿¼ë¦¬ ë§¤ê°œë³€ìˆ˜**:
  - `user_id`: ì‚¬ìš©ì ID
  - `class_id`: ë°˜ ID
  - `subject_id`: ê³¼ëª© ID
  - `student_id`: í•™ìƒ ID
  - `title`: ì¼ì • ì œëª©
  - `page`: í˜ì´ì§€ ë²ˆí˜¸ (ê¸°ë³¸ê°’: 1)
  - `limit`: í˜ì´ì§€ë‹¹ í•­ëª© ìˆ˜ (ê¸°ë³¸ê°’: 20)

#### ì¼ì • í†µê³„ ì¡°íšŒ
- **GET** `/schedules/stats`
- **ì„¤ëª…**: ì¼ì • í†µê³„ ì¡°íšŒ

#### ì¼ë³„ ì¼ì • ìš”ì•½ ì¡°íšŒ
- **GET** `/schedules/daily/:date`
- **ì„¤ëª…**: íŠ¹ì • ë‚ ì§œì˜ ì¼ì • ìš”ì•½ ì¡°íšŒ

#### í•™ìƒë³„ ì¼ì • ìš”ì•½ ì¡°íšŒ
- **GET** `/schedules/student/:student_id/summary`
- **ì„¤ëª…**: íŠ¹ì • í•™ìƒì˜ ì¼ì • ìš”ì•½ ì¡°íšŒ

#### ë°˜ë³„ ì¼ì • ìš”ì•½ ì¡°íšŒ
- **GET** `/schedules/class/:class_id/summary`
- **ì„¤ëª…**: íŠ¹ì • ë°˜ì˜ ì¼ì • ìš”ì•½ ì¡°íšŒ

#### ë°°ì¹˜ ì¼ì • ìƒì„¸ ì •ë³´ ì¡°íšŒ
- **POST** `/schedules/batch/details`
- **ì„¤ëª…**: ì—¬ëŸ¬ ì¼ì •ì˜ ìƒì„¸ ì •ë³´ë¥¼ í•œ ë²ˆì— ì¡°íšŒ
- **ìš”ì²­ ë³¸ë¬¸**:
  ```json
  {
    "schedule_ids": ["id1", "id2", "id3"]
  }
  ```

#### ë°°ì¹˜ ì¼ì • í†µê³„ ì¡°íšŒ
- **GET** `/schedules/batch/stats`
- **ì„¤ëª…**: ë°°ì¹˜ ì¼ì • í†µê³„ ì¡°íšŒ

#### íŠ¹ì • ì¼ì • ì¡°íšŒ
- **GET** `/schedules/:id`
- **ì„¤ëª…**: íŠ¹ì • ì¼ì • ì¡°íšŒ

#### ì¼ì • ìƒì„¸ ì •ë³´ ì¡°íšŒ
- **GET** `/schedules/:id/details`
- **ì„¤ëª…**: ì¼ì •ê³¼ ê´€ë ¨ëœ ëª¨ë“  ì •ë³´ ì¡°íšŒ

#### ì¼ì • ìˆ˜ì •
- **PUT** `/schedules/:id`
- **ì„¤ëª…**: ì¼ì • ìˆ˜ì •

#### ì¼ì • ì‚­ì œ
- **DELETE** `/schedules/:id`
- **ì„¤ëª…**: ì¼ì • ì‚­ì œ

### ğŸ”§ ì—­í•  ê´€ë¦¬ (`/roles`)

#### ì—­í•  ìƒì„±
- **POST** `/roles`
- **ì„¤ëª…**: ìƒˆë¡œìš´ ì—­í•  ìƒì„±
- **ìš”ì²­ ë³¸ë¬¸**:
  ```json
  {
    "role_name": "ê´€ë¦¬ì",
    "role_description": "ì‹œìŠ¤í…œ ê´€ë¦¬ì"
  }
  ```

#### ì—­í•  ì¡°íšŒ (í•„í„°)
- **GET** `/roles`
- **ì„¤ëª…**: í•„í„°ë¥¼ ì‚¬ìš©í•œ ì—­í•  ì¡°íšŒ

#### ëª¨ë“  ì—­í•  ì¡°íšŒ
- **GET** `/roles/all`
- **ì„¤ëª…**: í•„í„° ì—†ì´ ëª¨ë“  ì—­í•  ì¡°íšŒ

#### íŠ¹ì • ì—­í•  ì¡°íšŒ
- **GET** `/roles/:id`
- **ì„¤ëª…**: íŠ¹ì • ì—­í•  ì¡°íšŒ

#### ì—­í•  ìˆ˜ì •
- **PUT** `/roles/:id`
- **ì„¤ëª…**: ì—­í•  ìˆ˜ì •

#### ì—­í•  ì‚­ì œ
- **DELETE** `/roles/:id`
- **ì„¤ëª…**: ì—­í•  ì‚­ì œ

## ğŸ”— ê´€ê³„ ê´€ë¦¬ API

### ì‚¬ìš©ì-ì—­í•  ê´€ê³„ (`/user-roles`)
### ì„ ìƒë‹˜-ê³¼ëª© ê´€ê³„ (`/teacher-subjects`)
### ë°˜-í•™ìƒ ê´€ê³„ (`/class-students`)
### ë¶€ëª¨ ê´€ë¦¬ (`/parents`)

ê° ê´€ê³„ ê´€ë¦¬ APIë„ ë™ì¼í•œ CRUD íŒ¨í„´ì„ ë”°ë¦…ë‹ˆë‹¤.

## ğŸ“Š ì‘ë‹µ í˜•ì‹

### ì„±ê³µ ì‘ë‹µ
```json
{
  "success": true,
  "data": {
    // ì‘ë‹µ ë°ì´í„°
  },
  "message": "ì‘ì—…ì´ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤."
}
```

### ì—ëŸ¬ ì‘ë‹µ
```json
{
  "success": false,
  "error": "ì—ëŸ¬ ë©”ì‹œì§€",
  "code": "ERROR_CODE"
}
```

## ğŸ” ì¸ì¦

ëŒ€ë¶€ë¶„ì˜ APIëŠ” JWT í† í° ì¸ì¦ì´ í•„ìš”í•©ë‹ˆë‹¤. í—¤ë”ì— ë‹¤ìŒì„ í¬í•¨í•˜ì„¸ìš”:

```
Authorization: Bearer <jwt_token>
```

## ğŸ› ï¸ ê°œë°œ ë„êµ¬

### ë¡œê·¸ í™•ì¸
```bash
npm run logs
```

### ë¦°íŠ¸ ê²€ì‚¬
```bash
npm run lint
```

### íƒ€ì… ì²´í¬
```bash
npm run build
```

## ğŸ“ í™˜ê²½ ë³€ìˆ˜

- `FIREBASE_PROJECT_ID`: Firebase í”„ë¡œì íŠ¸ ID
- `JWT_SECRET`: JWT ì„œëª… í‚¤
- `NODE_ENV`: ì‹¤í–‰ í™˜ê²½ (development/production)

## ğŸš¨ ì£¼ì˜ì‚¬í•­

1. **ê°œë°œ í™˜ê²½**: Firebase Emulator ì‚¬ìš©
2. **í”„ë¡œë•ì…˜**: Firebase Functions ë°°í¬
3. **ë°ì´í„°ë² ì´ìŠ¤**: Firestore ì‚¬ìš©
4. **ì¸ì¦**: Firebase Auth ì‚¬ìš©

## ğŸ§ª API í…ŒìŠ¤íŠ¸ ì˜ˆì‹œ

### ê°œë°œ í™˜ê²½ì—ì„œ í…ŒìŠ¤íŠ¸
```bash
# ê¸°ë³¸ URL
BASE_URL="http://localhost:5001/wiseupmanagementsystem/us-central1/api"

# 1. íšŒì›ê°€ì…
curl -X POST "$BASE_URL/auth/register" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "í…ŒìŠ¤íŠ¸ìœ ì €",
    "phone": "010-1234-5678",
    "email": "test@example.com",
    "password": "TestPass123!"
  }'

# 2. ë¡œê·¸ì¸
curl -X POST "$BASE_URL/auth/login" \
  -H "Content-Type: application/json" \
  -d '{
    "email": "test@example.com",
    "password": "TestPass123!"
  }'

# 3. ì‚¬ìš©ì ëª©ë¡ ì¡°íšŒ
curl -X GET "$BASE_URL/users"

# 4. í•™ìƒ ìƒì„±
curl -X POST "$BASE_URL/students" \
  -H "Content-Type: application/json" \
  -d '{
    "user_id": "user_id_from_step_2",
    "name": "ê¹€í•™ìƒ",
    "school": "ì„œìš¸ê³ ë“±í•™êµ",
    "grade": "2í•™ë…„"
  }'

# 5. ê³¼ëª© ìƒì„±
curl -X POST "$BASE_URL/subjects" \
  -H "Content-Type: application/json" \
  -d '{
    "subject_name": "ìˆ˜í•™",
    "subject_description": "ê³ ë“±í•™êµ ìˆ˜í•™"
  }'
```

### Postman/Insomnia ì‚¬ìš©
1. **í™˜ê²½ ë³€ìˆ˜ ì„¤ì •**:
   - `base_url`: `http://localhost:5001/wiseupmanagementsystem/us-central1/api`
2. **ìš”ì²­ í—¤ë”**:
   - `Content-Type: application/json`
   - `Authorization: Bearer <token>` (ì¸ì¦ í•„ìš” ì‹œ)

## ğŸ“ ì§€ì›

API ê´€ë ¨ ë¬¸ì˜ì‚¬í•­ì´ ìˆìœ¼ì‹œë©´ ê°œë°œíŒ€ì— ì—°ë½í•´ì£¼ì„¸ìš”. 